{{ $projects := where $.Site.RegularPages "Section" "projects" }}
{{ $num_projects := len $projects }}
{{ if $.IsHome }}
  {{ $num_projects = 4 }}
{{ end}}

<div class="grid" data-masonry='{ "itemSelector": ".card", "columnWidth": ".card-sizer", percentPosition: true }'>
  {{ range first $num_projects $projects }}
    {{ partial "project-listing.html" . }}
  {{ end }}
</div>
